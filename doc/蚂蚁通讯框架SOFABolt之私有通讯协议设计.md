# 前言

SOFABolt 是蚂蚁金融服务集团开发的一套基于 Netty 实现的网络通信框架。

- 为了让 Java 程序员能将更多的精力放在基于网络通信的业务逻辑实现上，而不是过多的纠结于网络底层 NIO 的实现以及处理难以调试的网络问题，Netty 应运而生。
- 为了让中间件开发者能将更多的精力放在产品功能特性实现上，而不是重复地一遍遍制造通信框架的轮子，SOFABolt 应运而生。

Bolt 名字取自迪士尼动画-闪电狗，是一个基于 Netty 最佳实践的轻量、易用、高性能、易扩展的通信框架。 这些年蚂蚁金融服务集团在微服务与消息中间件在网络通信上解决过很多问题，积累了很多经验，并持续的进行着优化和完善，希望能把总结出的解决方案沉淀到 SOFABolt 这个基础组件里，让更多的使用网络通信的场景能够统一受益。 目前该产品已经运用在了蚂蚁中间件的微服务 ([SOFARPC](https://github.com/alipay/sofa-rpc))、消息中心、分布式事务、分布式开关、以及配置中心等众多产品上。



# 调试环境搭建

## 依赖工具

- Maven

- Git

- JDK

- IntelliJ IDEA

源码拉取



![](/home/james/文档/Bolt-Protocol.png)



| 字段名                | 字节范围       | 备注                                      |
| --------------------- | -------------- | ----------------------------------------- |
| proto                 | 1字节          | 协议的魔数                                |
| ver1                  | 1字节          | 协议版本                                  |
| type                  | 1字节          | (1)request (2)response (3) request oneway |
| cmdcode               | 2字节          | 远程命令代码                              |
| ver2                  | 1字节          | 远程命令版本                              |
| requestId             | 4字节          | 请求ID                                    |
| codec                 | 1字节          | 编解码代码                                |
| switch                | 1字节          | 协议功能开关                              |
| timeout或者respstatus | 4字节或者2字节 | 请求超时或者回复状态                      |
| classLen              | 2字节          | 请求或响应类名称的长度                    |
| headerLen             | 2字节          | 协议头长度                                |
| contentLen            | 4字节          | 协议内容长度                              |
| content               | N字节          | 内容                                      |
| CRC32(optional)       | 4字节          | 帧的CRC32（当ver1> 1时存在）              |


